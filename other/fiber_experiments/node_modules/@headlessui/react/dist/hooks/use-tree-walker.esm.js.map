{"version":3,"file":"use-tree-walker.esm.js","sources":["../../src/hooks/use-tree-walker.ts"],"sourcesContent":["import { useRef, useEffect } from 'react'\nimport { useIsoMorphicEffect } from './use-iso-morphic-effect'\n\ntype AcceptNode = (\n  node: HTMLElement\n) =>\n  | typeof NodeFilter.FILTER_ACCEPT\n  | typeof NodeFilter.FILTER_SKIP\n  | typeof NodeFilter.FILTER_REJECT\n\nexport function useTreeWalker({\n  container,\n  accept,\n  walk,\n  enabled = true,\n}: {\n  container: HTMLElement | null\n  accept: AcceptNode\n  walk(node: HTMLElement): void\n  enabled?: boolean\n}) {\n  let acceptRef = useRef(accept)\n  let walkRef = useRef(walk)\n\n  useEffect(() => {\n    acceptRef.current = accept\n    walkRef.current = walk\n  }, [accept, walk])\n\n  useIsoMorphicEffect(() => {\n    if (!container) return\n    if (!enabled) return\n\n    let accept = acceptRef.current\n    let walk = walkRef.current\n\n    let acceptNode = Object.assign((node: HTMLElement) => accept(node), { acceptNode: accept })\n    let walker = document.createTreeWalker(container, NodeFilter.SHOW_ELEMENT, acceptNode, false)\n\n    while (walker.nextNode()) walk(walker.currentNode as HTMLElement)\n  }, [container, enabled, acceptRef, walkRef])\n}\n"],"names":["useTreeWalker","container","accept","walk","enabled","acceptRef","useRef","walkRef","useEffect","current","useIsoMorphicEffect","acceptNode","Object","assign","node","walker","document","createTreeWalker","NodeFilter","SHOW_ELEMENT","nextNode","currentNode"],"mappings":";;;SAUgBA;MACdC,iBAAAA;MACAC,cAAAA;MACAC,YAAAA;0BACAC;MAAAA,oCAAU;AAOV,MAAIC,SAAS,GAAGC,MAAM,CAACJ,MAAD,CAAtB;AACA,MAAIK,OAAO,GAAGD,MAAM,CAACH,IAAD,CAApB;AAEAK,EAAAA,SAAS,CAAC;AACRH,IAAAA,SAAS,CAACI,OAAV,GAAoBP,MAApB;AACAK,IAAAA,OAAO,CAACE,OAAR,GAAkBN,IAAlB;AACD,GAHQ,EAGN,CAACD,MAAD,EAASC,IAAT,CAHM,CAAT;AAKAO,EAAAA,mBAAmB,CAAC;AAClB,QAAI,CAACT,SAAL,EAAgB;AAChB,QAAI,CAACG,OAAL,EAAc;AAEd,QAAIF,MAAM,GAAGG,SAAS,CAACI,OAAvB;AACA,QAAIN,IAAI,GAAGI,OAAO,CAACE,OAAnB;AAEA,QAAIE,UAAU,GAAGC,MAAM,CAACC,MAAP,CAAc,UAACC,IAAD;AAAA,aAAuBZ,MAAM,CAACY,IAAD,CAA7B;AAAA,KAAd,EAAmD;AAAEH,MAAAA,UAAU,EAAET;AAAd,KAAnD,CAAjB;AACA,QAAIa,MAAM,GAAGC,QAAQ,CAACC,gBAAT,CAA0BhB,SAA1B,EAAqCiB,UAAU,CAACC,YAAhD,EAA8DR,UAA9D,EAA0E,KAA1E,CAAb;;AAEA,WAAOI,MAAM,CAACK,QAAP,EAAP;AAA0BjB,MAAAA,IAAI,CAACY,MAAM,CAACM,WAAR,CAAJ;AAA1B;AACD,GAXkB,EAWhB,CAACpB,SAAD,EAAYG,OAAZ,EAAqBC,SAArB,EAAgCE,OAAhC,CAXgB,CAAnB;AAYD;;;;"}